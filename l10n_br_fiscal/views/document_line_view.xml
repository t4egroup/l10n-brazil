<?xml version="1.0" encoding="utf-8"?>
<odoo>
    <record id="document_line_form" model="ir.ui.view">
        <field name="name">l10n_br_fiscal.document.line.form</field>
        <field name="model">l10n_br_fiscal.document.line</field>
        <field name="arch" type="xml">
            <form string="Fiscal Document Line">
                <group invisible="1" name="fiscal_fields">
                    <field invisible="1" name="currency_id"/>
                    <field invisible="1" name="fiscal_operation_type"/>
                    <field invisible="1" name="company_id"/>
                    <field invisible="1" name="tax_framework"/>
                    <field invisible="1" name="fiscal_genre_id"/>
                    <field invisible="1" name="fiscal_genre_code"/>
                    <field invisible="1" name="fiscal_type"/>
                </group>
                <group>
                    <field context="{'tree_view_ref': 'product_template_tree', 'form_view_ref': 'product.product_template_only_form_view'}" name="product_id"/>
                    <field name="name" required="1"/>
                </group>
                <notebook>
                    <page name="general" string="General">
                        <group>
                            <group name="commercial_info" string="Commercial">
                                <label for="quantity"/>
                                <div class="o_row">
                                    <field class="oe_inline" name="quantity"/>
                                    <field class="oe_inline" groups="uom.group_uom" name="uom_id"/>
                                </div>
                                <field name="price_unit"/>
                                <field name="discount_value"/>
                                <field invisible="1" name="delivery_costs"/>
                                <field invisible="1" name="force_compute_delivery_costs_by_total"/>
                                <field name="insurance_value" readonly="delivery_costs == 'total' or force_compute_delivery_costs_by_total == True"/>
                                <field name="other_value" readonly="delivery_costs == 'total' or force_compute_delivery_costs_by_total == True"/>
                                <field name="freight_value" readonly="delivery_costs == 'total' or force_compute_delivery_costs_by_total == True"/>
                            </group>
                            <group name="fiscal_info" string="Fiscal">
                                <label for="fiscal_quantity"/>
                                <div class="o_row">
                                    <field class="oe_inline" name="fiscal_quantity"/>
                                    <field class="oe_inline" groups="uom.group_uom" name="uot_id"/>
                                </div>
                                <field name="fiscal_price"/>
                                <field name="ncm_id"/>
                                <field name="fiscal_genre_id"/>
                                <field name="nbm_id"/>
                                <field name="cest_id"/>
                                <field name="nbs_id"/>
                                <field invisible="fiscal_genre_code != '00' and cfop_id != False" name="service_type_id"/>
                                <field invisible="fiscal_genre_code != '00' and cfop_id != False" name="city_taxation_code_id"/>
                                <field invisible="fiscal_genre_code != '00' and cfop_id != False" name="cnae_id"/>
                            </group>
                            <group name="l10n_br_fiscal" string="Operation">
                                <field invisible="1" name="fiscal_operation_type" readonly="1"/>
                                <field name="fiscal_operation_id" required="1"/>
                                <field name="fiscal_operation_line_id" required="1"/>
                                <field invisible="fiscal_type == '00' and cfop_id == False" name="cfop_id"/>
                            </group>
                        </group>
                    </page>
                    <page name="fiscal_taxes" string="Taxes"/>
                    <page name="amounts" string="Amounts">
                        <group>
                            <group>
                                <field name="amount_untaxed"/>
                                <field name="amount_fiscal"/>
                                <field name="amount_tax"/>
                                <field name="estimate_tax"/>
                            </group>
                            <group>
                                <field name="amount_total"/>
                                <field name="amount_tax_withholding"/>
                                <field name="amount_taxed"/>
                            </group>
                        </group>
                    </page>
                    <page name="fiscal_line_extra_info" string="Extra Info"/>
                </notebook>
            </form></field>
    </record>
</odoo>
