<?xml version="1.0" encoding="utf-8"?>
<odoo>
    <record id="fiscal_res_company_form" model="ir.ui.view">
        <field name="name">l10n_br_fiscal.res.company.form</field>
        <field name="model">res.company</field>
        <field name="inherit_id" ref="base.view_company_form"/>
        <field name="arch" type="xml">
            <notebook>
                <page groups="l10n_br_fiscal.group_manager" name="fiscal" string="Fiscal">
                    <notebook>
                        <page name="tax_framework" string="Tax Framework">
                            <field invisible="1" name="id"/>
                            <group string="Tax Framework">
                                <field name="tax_framework"/>
                                <field name="accountant_id"/>
                                <field domain="[('is_company', '=', True)]" name="accounting_office"/>
                                <field domain="[('is_company', '=', True)]" name="technical_support_id"/>
                            </group>
                            <group invisible="tax_framework == '3'" name="simples" string="Simples Nacional">
                                <group>
                                    <field name="annual_revenue"/>
                                    <field name="payroll_amount"/>
                                </group>
                                <group>
                                    <field name="simplified_tax_id"/>
                                    <field name="simplified_tax_range_id"/>
                                    <field name="coefficient_r"/>
                                    <field name="coefficient_r_percent"/>
                                    <field name="simplified_tax_percent"/>
                                </group>
                            </group>
                            <group invisible="tax_framework != '3'" name="normal" string="Regime Normal">
                                <group>
                                    <field name="profit_calculation" required="tax_framework == '3'"/>
                                </group>
                                <group>
                                    <field name="is_industry"/>
                                    <field invisible="is_industry == False" name="industry_type" required="is_industry == True"/>
                                </group>
                            </group>
                            <group string="CNAE">
                                <field name="cnae_main_id" options="{'no_create': True, 'no_create_edit': True}"/>
                            </group>
                            <group colspan="4" string="Secondary CNAE">
                                <field colspan="4" name="cnae_secondary_ids" nolabel="1" options="{'no_create': True}"/>
                            </group>
                        </page>
                        <page name="taxes" string="Taxes">
                            <group name="normal_taxes" string="Default Taxes">
                                <group name="piscofins_taxes" string="PIS/COFINS">
                                    <field name="piscofins_id" options="{'no_create': True, 'no_create_edit': True}" required="1"/>
                                    <field name="tax_pis_wh_id"/>
                                    <field name="tax_cofins_wh_id"/>
                                </group>
                                <group name="ipi_taxes" string="IPI">
                                    <field invisible="tax_framework != '3'" name="ripi"/>
                                    <field invisible="tax_framework == '3' and ripi == True" name="tax_ipi_id" required="tax_framework != '3'"/>
                                    <div class="text-muted" colspan="2" invisible="ripi == False">
                                        IPI tax will be calculed by Product NCM and Fiscal Operation.
                                    </div>
                                </group>
                                <group name="icms_taxes" string="ICMS">
                                    <field invisible="tax_framework == '3'" name="tax_icms_id" options="{'no_create': True, 'no_create_edit': True}" required="tax_framework in ('1', '2')"/>
                                    <field invisible="tax_framework != '3'" name="icms_regulation_id" options="{'no_create': True, 'no_create_edit': True}" required="tax_framework == '3'"/>
                                </group>
                                <group name="issqn_taxes" string="ISSQN">
                                    <field name="tax_issqn_id"/>
                                    <field name="tax_issqn_wh_id"/>
                                </group>
                                <group name="csll_taxes" string="CSLL">
                                    <field name="tax_csll_id"/>
                                    <field name="tax_csll_wh_id"/>
                                </group>
                                <group name="irpj_taxes" string="IRPJ">
                                    <field name="tax_irpj_id"/>
                                    <field name="tax_irpj_wh_id"/>
                                </group>
                                <group name="inss_taxes" string="INSS">
                                    <field name="tax_inss_id"/>
                                    <field name="tax_inss_wh_id"/>
                                </group>
                            </group>
                            <group name="advanced_taxes" string="Advanced Taxes">
                                <field context="{'tree_view_ref': 'l10n_br_fiscal.tax_definition_tree','form_view_ref': 'l10n_br_fiscal.tax_definition_form', 'default_company_id': id}" name="tax_definition_ids" nolabel="1"/>
                            </group>
                        </page>
                        <page name="delivery_costs" string="Delivery Costs">
                            <group>
                                <group>
                                    <field name="delivery_costs"/>
                                    <div class="text-muted">
                                        Define if Delivery Costs (Freight, Insurance and Other Costs) should be informed by Line or by Total
                                    </div>
                                </group>
                            </group>
                        </page>
                        <page name="edoc" string="Documentos EletrÃ´nicos">
                            <group name="edoc">
                                <group>
                                    <field name="processador_edoc"/>
                                    <field name="document_save_disk"/>
                                    <field name="document_type_id"/>
                                </group>
                                <group/>
                            </group>
                        </page>
                    </notebook>
                </page>
            </notebook></field>
    </record>
</odoo>
