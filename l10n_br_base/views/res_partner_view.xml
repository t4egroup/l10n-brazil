<?xml version="1.0" encoding="utf-8"?>
<odoo>
    <!--
    views: res.partner
    -->
    <record id="l10n_br_base_res_partner_filter" model="ir.ui.view">
        <field name="name">l10n_br_base.res.partner.filter</field>
        <field name="model">res.partner</field>
        <field name="inherit_id" ref="base.view_res_partner_filter" />
        <field name="arch" type="xml">
            <field name="name" position="after">
                <field name="legal_name" />
                <field name="cnpj_cpf" />
            </field>
        </field>
    </record>
    <record id="l10n_br_base_res_partner_tree" model="ir.ui.view">
        <field name="name">l10n_br_base.res.partner.tree</field>
        <field name="model">res.partner</field>
        <field name="inherit_id" ref="base.view_partner_tree" />
        <field name="arch" type="xml">
            <field name="display_name" position="after">
                <field name="legal_name" />
                <field name="cnpj_cpf" />
                <field name="inscr_est" />
            </field>
        </field>
    </record>
    <record id="l10n_br_base_partner_form" model="ir.ui.view">
        <field name="name">l10n_br_base.res.partner.form</field>
        <field name="model">res.partner</field>
        <field name="priority">99</field>
        <field name="inherit_id" ref="base.view_partner_form" />
        <field name="arch" type="xml">
            <field name="vat" position="replace">
                <attribute name="readonly">['|', ('cnpj_cpf', 'not in', [False, ""]), ('parent_id',
                    '!=', False)]</attribute>
            </field>
                
            <xpath expr="//sheet/group/group" position="replace">
                <group>
                    <group class="w-100">
                        <field name="type" invisible="is_company" readonly="user_ids"
                            required="not is_company" class="fw-bold" />
                        <field invisible="1" name="city_id" />
                        <label for="cnpj_cpf" string="CNPJ" invisible="is_company != True"/>
                        <label for="cnpj_cpf" string="CPF" invisible="is_company == True"/>
                        <field name="cnpj_cpf" nolabel="1"/>
                        <field name="legal_name" invisible="is_company != True" />   
                        <field name="rg" invisible="is_company == True" />
                        <field name="inscr_est" string="I.E" invisible="is_company != True" />
                    </group>
                    <group class="w-100" string="EndereÃ§o">
                        <field name="street"/>
                        <field class="o_address_zip" name="zip" placeholder="CEP" style="width: 70%"/>
                        <field class="o_address_street" name="street_name" placeholder="Street..."/>
                        <field class="o_address_street" name="street_number" placeholder="Street number..."/>
                        <field class="o_address_street" name="street2" placeholder="Complement..."/>
                        <field class="o_address_street" name="district" placeholder="District..."/>
                        <field class="o_address_state" domain="[('country_id', '=', country_id)]" name="state_id" options='{"no_open": True, "no_create": True}' placeholder="State..." style="width: 45%"/>
                        <field class="o_address_city" invisible="country_id != %(base.br)d" name="city_id" options='{"no_open": True, "no_create": True}' placeholder="City..." style="width: 50%"/>
                        <field class="o_address_city" force_save="True" invisible="country_id == %(base.br)d" name="city" placeholder="City..." style="width: 50%"/>
                        <field class="o_address_country" name="country_id" options='{"no_open": True, "no_create": True}' placeholder="Country..."/>
                        
                    </group>
                </group>
            </xpath>
            <page name="sales_purchases" position="after">
                <page name="fiscal" string="Fiscal">
                    <group name="fiscal">
                        <group name="fiscal_numbers" string="Fiscal Infos">
                            <field name="cei_code" />
                            <field invisible="is_company != True" name="inscr_mun" />
                            <field invisible="is_company != True" name="suframa" />
                            <field invisible="is_company != True" name="state_tax_number_ids">
                                <tree editable="bottom">
                                    <field invisible="1" name="partner_id" />
                                    <field name="inscr_est" />
                                    <field create="False"
                                        domain="[('country_id', '=', %(base.br)d)]" edit="False"
                                        name="state_id" />
                                </tree>
                            </field>
                        </group>
                        <group name="other_infos" string="Other Infos">
                            <field name="union_entity_code" />
                            <field name="is_accountant" />
                            <field invisible="is_accountant != True" name="crc_code" />
                            <field domain="[('country_id', '=', %(base.br)d)]"
                                invisible="is_accountant != True" name="crc_state_id" />
                            <field name="rntrc_code" />
                        </group>
                    </group>
                </page>
            </page>
            <xpath expr="//field[@name='child_ids']" position="attributes">
                <!-- tracking_disable allow user to zip search on child_ids without save the child -->
                <attribute name="context">
                    {'tracking_disable': True, 'default_city_id': city_id}</attribute>
            </xpath>
        </field>
    </record>
    <record id="l10n_br_base_partner_contact_form" model="ir.ui.view">
        <field name="name">l10n_br_base.res.partner.contact.form</field>
        <field name="model">res.partner</field>
        <field name="priority">9999</field>
        <field name="inherit_id" ref="base.view_partner_form" />
        <field name="arch" type="xml">
            <xpath expr="//div[@name='div_address']" position="replace">
                <div class="o_address_format">
                    <field class="o_address_street" invisible="1" name="street"
                        placeholder="Street..." />
                    <field class="o_address_zip" name="zip" placeholder="Zip code..."
                        style="width: 70%" />
                </div>
            </xpath>
        </field>
    </record>
</odoo>